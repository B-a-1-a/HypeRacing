{
  "db_name": "PostgreSQL",
  "query": "select key, sector_nr, array_agg(value) as values from (\n            select\n                driver_key::text as key,\n                sector_key::text as sector_nr,\n                NULLIF((state -> 'lines' -> driver_key -> 'sectors' -> sector_key ->> 'value'), '') as value\n            from (\n                select\n                    driver_key,\n                    jsonb_object_keys(state -> 'lines' -> driver_key -> 'sectors') as sector_key,\n                    state\n                from (\n                    select\n                        jsonb_object_keys(state -> 'lines') as driver_key,\n                        state\n                    from updates\n                    where category = 'timingData' and created_at > $1 and created_at < $2\n                ) as drivers\n            ) as driver_sectors\n        ) as aggregated_driver_sectors where value is not null and key is not null group by key, sector_nr;",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "key",
        "type_info": "Text"
      },
      {
        "ordinal": 1,
        "name": "sector_nr",
        "type_info": "Text"
      },
      {
        "ordinal": 2,
        "name": "values",
        "type_info": "TextArray"
      }
    ],
    "parameters": {
      "Left": [
        "Timestamptz",
        "Timestamptz"
      ]
    },
    "nullable": [
      null,
      null,
      null
    ]
  },
  "hash": "b39e182a855d6625236bb8bd9e7158c979f3d20e2d4d1c592a64ca30872c6159"
}
